@page
@model Api.Depot.UIL.Areas.Teachers.Pages.CreateLessonModel
@{
}

<h1 class="text-center">Créer un cours</h1>

<form method="post">
	<div class="row">
		<div class="form-group">
			<label asp-for="Lesson.Name">Titre</label>
			<input asp-for="Lesson.Name" type="text" class="form-control" placeholder="Titre du cours" />
			<span asp-validation-for="Lesson.Name" class="text-danger"></span>
		</div>
		<div class="form-group">
			<label asp-for="Lesson.Description"> Description </label>
			<input asp-for="Lesson.Description" type="text" height="250" class="form-control" placeholder="Description du cours">
			<span asp-validation-for="Lesson.Description" class="text-danger"></span>
		</div>

		<div class="form-group">
			<label>Horaire de début</label>
			<input asp-for="Lesson.StartsAt" type="date" class="form-control" placeholder="Horaire début" />
			<span asp-validation-for="Lesson.StartsAt" class="text-danger"></span>
			<label>Horaire de fin</label>
			<input asp-for="Lesson.EndsAt" type="date" class="form-control" placeholder="Horaire fin" />
			<span asp-validation-for="Lesson.EndsAt" class="text-danger"></span>
		</div>

		<div class="form-group">
			<input asp-for="Lesson.UserId" type="text" hidden>
		</div>
		<div class="row">
			<div asp-validation-summary="All" class="text-danger"></div>
		</div>
	</div>

	<div class="d-flex justify-content-lg-between">
		@{
			for(int i = 0; i < Model.LessonDays.Count; i++)
			{
				<div class="mr-10 ml-10" id="@Model.LessonDays[i].DayName">
					<h2>@Model.LessonDays[i].DayName</h2>
					<input asp-for="@Model.LessonDays[i].Day" name="LessonDays[@i].Day" disabled hidden />
					<input asp-for="@Model.LessonDays[i].DayName" name="LessonDays[@i].DayName" type="text" disabled hidden />
					<br />
					<label>Sélectionner</label>
					<input asp-for="@Model.LessonDays[i].IsSelected" name="LessonDays[@i].IsSelected" onclick="makeAvailable(@Model.LessonDays[i].DayName)" type="checkbox" placeholder="Date sélectionnée" />
					<br />
					<label value="@Model.LessonDays[i].StartsAt">Début</label>
					<input value="@Model.LessonDays[i].StartsAt" name="LessonDays[@i].StartsAt" type="time" class="form-control" disabled placeholder="Début du cours" />
					<label value="@Model.LessonDays[i].EndsAt">Fin</label>
					<input value="@Model.LessonDays[i].EndsAt" name="LessonDays[@i].EndsAt" type="time" class="form-control" disabled placeholder="Fin du cours" />
				</div>
			}
		}
	</div>
	<br />
	<button type="submit" class="btn btn-primary">Créer</button>
</form>

<script>

	function makeAvailable(day) {
		console.log(day);

		$('#' + day.id + ' > input').each(function() {

			console.log(this);

			if(!$(this).is('input[type="checkbox"]') ) {

				if($(this).prop('disabled')) {
					$(this).prop('disabled', false);
				} else {
					$(this).prop('disabled', true);
				}
			}
		});
	}

</script>

@section Scripts{
	<partial name="_ValidationScriptsPartial" />
}